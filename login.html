<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login • Work Manager</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
</head>
<body class="auth-body">
    <div class="auth-bg" aria-hidden="true">
        <div class="bg-circle"></div>
        <div class="bg-circle"></div>
        <div class="bg-circle"></div>
        <div class="bg-circle"></div>
    </div>
    <main class="auth-wrapper">
        <div class="auth-card">
            <div class="auth-brand">
                <div class="auth-icon"><i class="fas fa-briefcase"></i></div>
                <h1 class="auth-title" data-en="Work Manager" data-ar="مدير العمل">Work Manager</h1>
                <p class="auth-subtitle" data-en="Welcome back. Please sign in to continue" data-ar="مرحبًا بعودتك. سجّل الدخول للمتابعة">Welcome back. Please sign in to continue</p>
            </div>

            <form id="login-form" class="modern-form auth-form" novalidate>
                <div class="form-group">
                    <label for="username" data-en="Username" data-ar="اسم المستخدم">Username</label>
                    <div class="input-with-icon">
                        <i class="fas fa-user"></i>
                        <input type="text" id="username" autocomplete="username" placeholder="Anon.ds" required>
                    </div>
                    <small class="input-error" id="username-error"></small>
                </div>

                <div class="form-group">
                    <label for="password" data-en="Password" data-ar="كلمة المرور">Password</label>
                    <div class="input-with-icon">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="password" autocomplete="current-password" placeholder="••••••••" required>
                        <button class="toggle-password" type="button" aria-label="Toggle password visibility">
                            <i class="far fa-eye"></i>
                        </button>
                    </div>
                    <small class="input-error" id="password-error"></small>
                </div>

                <div class="auth-row">
                    <label class="remember-me">
                        <input type="checkbox" id="remember" />
                        <span data-en="Remember me" data-ar="تذكرني">Remember me</span>
                    </label>
                    <a href="#" class="auth-link" data-en="Forgot password?" data-ar="هل نسيت كلمة المرور؟">Forgot password?</a>
                </div>

                <button type="submit" class="btn btn-primary auth-submit" id="auth-submit-btn">
                    <i class="fas fa-right-to-bracket"></i>
                    <span data-en="Sign In" data-ar="تسجيل الدخول">Sign In</span>
                </button>

               

                
            </form>

            <div class="auth-footer">
                <p data-en="If you lose your login information, contact the developer" data-ar="">If you lose your login information, contact the developer.</p>
            </div>
        </div>
    </main>

    <script>
        (function() {
            var savedLang = localStorage.getItem('lang') || 'en';
            var isArabic = savedLang === 'ar';
            function applyLanguage(lang) {
                var root = document.documentElement;
                var isAr = lang === 'ar';
                root.setAttribute('lang', isAr ? 'ar' : 'en');
                root.setAttribute('dir', isAr ? 'rtl' : 'ltr');
                document.querySelectorAll('[data-en]').forEach(function(el) {
                    var text = el.getAttribute(isAr ? 'data-ar' : 'data-en');
                    if (text) el.textContent = text;
                });
                localStorage.setItem('lang', lang);
            }
            applyLanguage(isArabic ? 'ar' : 'en');

            

            var toggleBtn = document.querySelector('.toggle-password');
            toggleBtn.addEventListener('click', function() {
                var input = document.getElementById('password');
                var icon = toggleBtn.querySelector('i');
                if (input.type === 'password') {
                    input.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                } else {
                    input.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            });

            function setError(id, message) {
                var el = document.getElementById(id);
                if (el) {
                    el.textContent = message || '';
                }
            }

            document.getElementById('login-form').addEventListener('submit', function(e) {
                e.preventDefault();
                setError('username-error', '');
                setError('password-error', '');
                var username = document.getElementById('username').value.trim();
                var password = document.getElementById('password').value;
                var remember = document.getElementById('remember').checked;
                var submitBtn = document.getElementById('auth-submit-btn');
                submitBtn.classList.add('loading');

                if (!username) {
                    setError('username-error', (localStorage.getItem('lang') === 'ar') ? 'الرجاء إدخال اسم المستخدم' : 'Please enter your username');
                    document.querySelector('.auth-card').classList.add('shake');
                    setTimeout(function(){ document.querySelector('.auth-card').classList.remove('shake'); }, 450);
                    submitBtn.classList.remove('loading');
                    return;
                }
                if (!password) {
                    setError('password-error', (localStorage.getItem('lang') === 'ar') ? 'الرجاء إدخال كلمة المرور' : 'Please enter your password');
                    document.querySelector('.auth-card').classList.add('shake');
                    setTimeout(function(){ document.querySelector('.auth-card').classList.remove('shake'); }, 450);
                    submitBtn.classList.remove('loading');
                    return;
                }

                try {
                    var accountData = JSON.parse(localStorage.getItem('workManagerData') || '{}');
                    var settingsAccount = (accountData.settings && accountData.settings.account) ? accountData.settings.account : { username: 'admin', password: 'admin' };
                    var validUser = settingsAccount.username || 'admin';
                    var validPass = settingsAccount.password || 'admin';
                } catch (err) {
                    var validUser = 'admin';
                    var validPass = 'admin';
                }
                setTimeout(function(){
                    if (username === validUser && password === validPass) {
                        var payload = { username: username, loginAt: Date.now(), remember: !!remember };
                        try { localStorage.setItem('authUser', JSON.stringify(payload)); } catch (e) {}
                        window.location.replace('index.html');
                    } else {
                    var msg = (localStorage.getItem('lang') === 'ar') ? 'بيانات الدخول غير صحيحة' : 'Invalid username or password';
                    setError('password-error', msg);
                    document.querySelector('.auth-card').classList.add('shake');
                    setTimeout(function(){ document.querySelector('.auth-card').classList.remove('shake'); }, 450);
                    submitBtn.classList.remove('loading');
                    }
                }, 700);
            });
        })();
    </script>
</body>
</html>


